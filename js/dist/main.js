window.RESTCache={extend:function(e,t){var a=e;e.prototype=Object.create(t.prototype),e.prototype.constructor=a}},jQuery(function(e){e("#rest-cache-tabs").tabs()}),jQuery(function(c){RESTCache.Table=function(e){var t=this;this.$element=c(e),this.url=this.$element.attr("data-route"),this.$element.on("click","[data-action='edit']",function(e){t.onEdit(e)}),this.$element.on("click","[data-action='update']",function(e){t.onUpdate(e)}),this.$element.on("click","[data-action='delete']",function(e){t.onDelete(e)})},RESTCache.Table.prototype.getIDFromEvent=function(e){return c(e.currentTarget).closest("tr").attr("data-id")},RESTCache.Table.prototype.getControlFromField=function(e){var t=c("<input/>");return t.attr("name",e),t},RESTCache.Table.prototype.setItemEditable=function(e){var o=this,t=this.$element.find("tr[data-id='"+e+"']");t.children("td").each(function(e,t){var a=c(t).attr("data-field");switch(a){case"id":case"actions":return!0}var n=o.getControlFromField(a);n.val(c(t).text()),c(t).empty(),c(t).append(n)}),t.addClass("rest-cache-editing")},RESTCache.Table.prototype.onEdit=function(e){var t=this.getIDFromEvent(e);this.setItemEditable(t)},RESTCache.Table.prototype.onUpdate=function(e){var n=this,t=this.getIDFromEvent(e),a={};c(e.currentTarget).closest("tr").find(":input").each(function(e,t){c(t).attr("name")&&(a[c(t).attr("name")]=c(t).val())}),c.ajax(this.url+"/"+t,{method:"PUT",data:a,success:function(e,t,a){n.onActionComplete(e)}})},RESTCache.Table.prototype.onDelete=function(e){var n=this,t=this.getIDFromEvent(e);c.ajax(this.url+"/"+t,{method:"DELETE",success:function(e,t,a){n.onActionComplete(e)}})},RESTCache.Table.prototype.onActionComplete=function(e){this.$element.DataTable().ajax.reload()}}),jQuery(function(t){RESTCache.RecordsTable=function(e){RESTCache.Table.call(this,e)},RESTCache.extend(RESTCache.RecordsTable,RESTCache.Table),t(window).on("load",function(e){RESTCache.recordsTable=new RESTCache.RecordsTable(t("#records table[data-route]"))})}),jQuery(function(a){RESTCache.RulesTable=function(e){var t=this;RESTCache.Table.call(this,e),a("button#add-rule").on("click",function(e){t.onAddRule(e)})},RESTCache.extend(RESTCache.RulesTable,RESTCache.Table),RESTCache.RulesTable.prototype.onAddRule=function(e){var n=this;a.ajax(this.url,{method:"POST",success:function(e,t,a){n.$element.DataTable().ajax.reload()}})},a(window).on("load",function(e){RESTCache.rulesTable=new RESTCache.RulesTable(a("#rules table[data-route]"))})});
//# sourceMappingURL=main.js.map
