{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/src/Admin.js","js/src/RecordsTable.js","js/src/RulesTable.js","js/src/Table.js","js/src/entry.js"],"names":[],"mappings":"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","file":"entry.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import RulesTable from \"./RulesTable\";\r\nimport RecordsTable from \"./RecordsTable\";\r\n\r\nexport default class Admin\r\n{\r\n\tconstructor()\r\n\t{\r\n\t\tthis.rulesTable\t\t= new RulesTable($(\"#rules table\"));\r\n\t\tthis.recordsTable\t= new RecordsTable($(\"#records table\"));\r\n\t\t\r\n\t\t$(\"#rest-cache-tabs\").tabs();\r\n\t}\r\n}\r\n\r\nwindow.RESTCache = {\r\n\tadmin: new Admin()\r\n};","import Table from \"./Table\";\r\n\r\nexport default class RecordsTable extends Table\r\n{\r\n\tconstructor(element)\r\n\t{\r\n\t\tsuper(element);\r\n\t\t\r\n\t\t$(\"#rest-cache-admin #refresh-table\").on(\"click\", (event) => this.onRefreshTable(event));\r\n\t\t$(\"#rest-cache-admin #clear-cache\").on(\"click\", (event) => this.onClearCache(event));\r\n\t}\r\n\t\r\n\tonRefreshTable(event)\r\n\t{\r\n\t\t$(\"#rest-cache-admin #records .dataTable\").DataTable().ajax.reload();\r\n\t}\r\n\t\r\n\tonClearCache(event)\r\n\t{\r\n\t\t$.ajax(this.url, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tsuccess: function(response, status, xhr) {\r\n\t\t\t\tself.onActionComplete(response);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tonActionComplete(event)\r\n\t{\r\n\t\tthis.$element.DataTable().ajax.reload();\r\n\t}\r\n}\r\n","import Table from \"./Table\";\r\n \r\nexport default class RulesTable extends Table\r\n{\r\n\tconstructor(element)\r\n\t{\r\n\t\tsuper(element);\r\n\t\t\r\n\t\tthis.$element.on(\"click\", \"[data-action='cancel']\", event => this.onCancel(event));\r\n\t}\r\n\t\r\n\tgetControlFromField(field)\r\n\t{\r\n\t\tswitch(field)\r\n\t\t{\r\n\t\t\tcase \"regex\":\r\n\t\t\t\r\n\t\t\t\tvar $input = super.getControlFromField(field);\r\n\t\t\t\t$input.attr(\"type\", \"checkbox\");\r\n\t\t\t\treturn $input;\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase \"behaviour\":\r\n\t\t\t\r\n\t\t\t\tvar $select = $(\"<select name='behaviour'>\\\r\n\t\t\t\t\t<option value='exclude'>Exclude</option>\\\r\n\t\t\t\t\t<option value='include'>Include</option>\\\r\n\t\t\t\t</select>\");\r\n\t\t\t\t\r\n\t\t\t\treturn $select;\r\n\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase \"priority\":\r\n\t\t\t\t\r\n\t\t\t\tvar $input = super.getControlFromField(field);\r\n\t\t\t\t\r\n\t\t\t\t$input.attr(\"type\", \"number\");\r\n\t\t\t\t\r\n\t\t\t\treturn $input;\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\treturn super.getControlFromField(field);\r\n\t}\r\n\t\r\n\tonCancel(event)\r\n\t{\r\n\t\tthis.$element.DataTable().ajax.reload();\r\n\t}\r\n}","export default class Table\r\n{\r\n\tconstructor(element)\r\n\t{\r\n\t\tvar self = this;\r\n\t\t\r\n\t\tthis.$element = $(element);\r\n\t\t\r\n\t\tthis.url = this.$element.attr(\"data-route\");\r\n\t\t\r\n\t\tthis.$element.on(\"click\", \"[data-action='edit']\", event => this.onEdit(event));\r\n\t\tthis.$element.on(\"click\", \"[data-action='update']\", event => this.onUpdate(event));\r\n\t\tthis.$element.on(\"click\", \"[data-action='delete']\", event => this.onDelete(event));\r\n\t}\r\n\t\r\n\tgetIDFromEvent(event)\r\n\t{\r\n\t\tlet $tr = $(event.currentTarget).closest(\"tr\");\r\n\t\tlet id = $tr.attr(\"data-id\");\r\n\t\t\r\n\t\treturn id;\r\n\t}\r\n\t\r\n\tgetControlFromField(field)\r\n\t{\r\n\t\tlet $input = $(\"<input/>\");\r\n\t\t$input.attr(\"name\", field);\r\n\t\treturn $input;\r\n\t}\r\n\t\r\n\tgetRowData(id)\r\n\t{\r\n\t\t\r\n\t}\r\n\t\r\n\tsetItemEditable(id)\r\n\t{\r\n\t\tlet self = this;\r\n\t\tlet $tr = this.$element.find(\"tr[data-id='\" + id + \"']\");\r\n\t\t\r\n\t\t$tr.children(\"td\").each(function(index, td) {\r\n\t\t\t\r\n\t\t\tlet field = $(td).attr(\"data-field\");\r\n\t\t\t\r\n\t\t\tswitch(field)\r\n\t\t\t{\r\n\t\t\t\tcase \"id\":\r\n\t\t\t\tcase \"actions\":\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tlet $input = self.getControlFromField(field);\r\n\t\t\t\r\n\t\t\tswitch($input.attr(\"type\"))\r\n\t\t\t{\r\n\t\t\t\tcase \"checkbox\":\r\n\t\t\t\t\t$input.prop(\"checked\", $(td).text() == 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t$input.val($(td).text());\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$(td).empty();\r\n\t\t\t$(td).append($input);\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\t$tr.addClass(\"rest-cache-editing\");\r\n\t}\r\n\t\r\n\tonEdit(event)\r\n\t{\r\n\t\tlet id = this.getIDFromEvent(event);\r\n\t\tthis.setItemEditable(id);\r\n\t}\r\n\t\r\n\tonUpdate(event)\r\n\t{\r\n\t\tlet self\t= this;\r\n\t\tlet id\t\t= this.getIDFromEvent(event);\r\n\t\tlet data\t= {};\r\n\t\tlet $tr\t\t= $(event.currentTarget).closest(\"tr\");\r\n\t\t\r\n\t\t$tr.find(\":input\").each(function(index, el) {\r\n\t\t\t\r\n\t\t\tvar name = $(el).attr(\"name\");\r\n\t\t\t\r\n\t\t\tif(!name)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tswitch($(el).attr(\"type\"))\r\n\t\t\t{\r\n\t\t\t\tcase \"checkbox\":\r\n\t\t\t\tcase \"radio\":\r\n\t\t\t\t\tdata[name] = $(el).prop(\"checked\") ? 1 : 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdata[name] = $(el).val();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\t$.ajax(this.url + \"/\" + id, {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tdata: data,\r\n\t\t\tsuccess: function(response, status, xhr) {\r\n\t\t\t\tself.onActionComplete(response);\r\n\t\t\t},\r\n\t\t\terror: function(xhr, status, error) {\r\n\t\t\t\tif(xhr.status == 422)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar json = JSON.parse(xhr.responseText);\r\n\t\t\t\t\tself.onError(xhr.status, json);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tonDelete(event)\r\n\t{\r\n\t\tlet self\t= this;\r\n\t\tlet id\t\t= this.getIDFromEvent(event);\r\n\t\t\r\n\t\t$.ajax(this.url + \"/\" + id, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tsuccess: function(response, status, xhr) {\r\n\t\t\t\tself.onActionComplete(response);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tonActionComplete(event)\r\n\t{\r\n\t\tthis.$element.DataTable().ajax.reload();\r\n\t}\r\n\t\r\n\tonError(code, json)\r\n\t{\r\n\t\tfor(var key in json.errors)\r\n\t\t{\r\n\t\t\talert(json.errors[key]);\r\n\t\t}\r\n\t}\r\n}\r\n","require('./Admin');"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvQWRtaW4uanMiLCJqcy9zcmMvUmVjb3Jkc1RhYmxlLmpzIiwianMvc3JjL1J1bGVzVGFibGUuanMiLCJqcy9zcmMvVGFibGUuanMiLCJqcy9zcmMvZW50cnkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0FDQUE7O0FBQ0E7Ozs7OztJQUVxQixLLEdBRXBCLGlCQUNBO0FBQUE7O0FBQ0MsT0FBSyxVQUFMLEdBQW1CLElBQUksc0JBQUosQ0FBZSxDQUFDLENBQUMsY0FBRCxDQUFoQixDQUFuQjtBQUNBLE9BQUssWUFBTCxHQUFvQixJQUFJLHdCQUFKLENBQWlCLENBQUMsQ0FBQyxnQkFBRCxDQUFsQixDQUFwQjtBQUVBLEVBQUEsQ0FBQyxDQUFDLGtCQUFELENBQUQsQ0FBc0IsSUFBdEI7QUFDQSxDOzs7QUFHRixNQUFNLENBQUMsU0FBUCxHQUFtQjtBQUNsQixFQUFBLEtBQUssRUFBRSxJQUFJLEtBQUo7QUFEVyxDQUFuQjs7Ozs7Ozs7OztBQ2RBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUVxQixZOzs7OztBQUVwQix3QkFBWSxPQUFaLEVBQ0E7QUFBQTs7QUFBQTs7QUFDQyw4QkFBTSxPQUFOO0FBRUEsSUFBQSxDQUFDLENBQUMsa0NBQUQsQ0FBRCxDQUFzQyxFQUF0QyxDQUF5QyxPQUF6QyxFQUFrRCxVQUFDLEtBQUQ7QUFBQSxhQUFXLE1BQUssY0FBTCxDQUFvQixLQUFwQixDQUFYO0FBQUEsS0FBbEQ7QUFDQSxJQUFBLENBQUMsQ0FBQyxnQ0FBRCxDQUFELENBQW9DLEVBQXBDLENBQXVDLE9BQXZDLEVBQWdELFVBQUMsS0FBRDtBQUFBLGFBQVcsTUFBSyxZQUFMLENBQWtCLEtBQWxCLENBQVg7QUFBQSxLQUFoRDtBQUpEO0FBS0M7Ozs7bUNBRWMsSyxFQUNmO0FBQ0MsTUFBQSxDQUFDLENBQUMsdUNBQUQsQ0FBRCxDQUEyQyxTQUEz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QUwwQjtBQU0zQixRQUFBLEtBQUssRUFBRSxlQUFTLEdBQVQsRUFBYyxNQUFkLEVBQXNCLE1BQXRCLEVBQTZCO0FBQ25DLGNBQUcsR0FBRyxDQUFDLE1BQUosSUFBYyxHQUFqQixFQUNBO0FBQ0MsZ0JBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFMLENBQVcsR0FBRyxDQUFDLFlBQWYsQ0FBWDtBQUNBLFlBQUEsSUFBSSxDQUFDLE9BQUwsQ0FBYSxHQUFHLENBQUMsTUFBakIsRUFBeUIsSUFBekI7QUFDQTtBQUNEO0FBWjBCLE9BQTVCO0FBY0E7Ozs2QkFFUSxLLEVBQ1Q7QUFDQyxVQUFJLElBQUksR0FBRyxJQUFYO0FBQ0EsVUFBSSxFQUFFLEdBQUksS0FBSyxjQUFMLENBQW9CLEtBQXBCLENBQVY7QUFFQSxNQUFBLENBQUMsQ0FBQyxJQUFGLENBQU8sS0FBSyxHQUFMLEdBQVcsR0FBWCxHQUFpQixFQUF4QixFQUE0QjtBQUMzQixRQUFBLE1BQU0sRUFBRSxRQURtQjtBQUUzQixRQUFBLE9BQU8sRUFBRSxpQkFBUyxRQUFULEVBQW1CLE1BQW5CLEVBQTJCLEdBQTNCLEVBQWdDO0FBQ3hDLFVBQUEsSUFBSSxDQUFDLGdCQUFMLENBQXNCLFFBQXRCO0FBQ0E7QUFKMEIsT0FBNUI7QUFNQTs7O3FDQUVnQixLLEVBQ2pCO0FBQ0MsV0FBSyxRQUFMLENBQWMsU0FBZCxHQUEwQixJQUExQixDQUErQixNQUEvQjtBQUNBOzs7NEJBRU8sSSxFQUFNLEksRUFDZDtBQUNDLFdBQUksSUFBSSxHQUFSLElBQWUsSUFBSSxDQUFDLE1BQXBCLEVBQ0E7QUFDQyxRQUFBLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTCxDQUFZLEdBQVosQ0FBRCxDQUFMO0FBQ0E7QUFDRDs7Ozs7Ozs7Ozs7QUNuSkYsT0FBTyxDQUFDLFNBQUQsQ0FBUCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBSdWxlc1RhYmxlIGZyb20gXCIuL1J1bGVzVGFibGVcIjtcclxuaW1wb3J0IFJlY29yZHNUYWJsZSBmcm9tIFwiLi9SZWNvcmRzVGFibGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFkbWluXHJcbntcclxuXHRjb25zdHJ1Y3RvcigpXHJcblx0e1xyXG5cdFx0dGhpcy5ydWxlc1RhYmxlXHRcdD0gbmV3IFJ1bGVzVGFibGUoJChcIiNydWxlcyB0YWJsZVwiKSk7XHJcblx0XHR0aGlzLnJlY29yZHNUYWJsZVx0PSBuZXcgUmVjb3Jkc1RhYmxlKCQoXCIjcmVjb3JkcyB0YWJsZVwiKSk7XHJcblx0XHRcclxuXHRcdCQoXCIjcmVzdC1jYWNoZS10YWJzXCIpLnRhYnMoKTtcclxuXHR9XHJcbn1cclxuXHJcbndpbmRvdy5SRVNUQ2FjaGUgPSB7XHJcblx0YWRtaW46IG5ldyBBZG1pbigpXHJcbn07IiwiaW1wb3J0IFRhYmxlIGZyb20gXCIuL1RhYmxlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWNvcmRzVGFibGUgZXh0ZW5kcyBUYWJsZVxyXG57XHJcblx0Y29uc3RydWN0b3IoZWxlbWVudClcclxuXHR7XHJcblx0XHRzdXBlcihlbGVtZW50KTtcclxuXHRcdFxyXG5cdFx0JChcIiNyZXN0LWNhY2hlLWFkbWluICNyZWZyZXNoLXRhYmxlXCIpLm9uKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB0aGlzLm9uUmVmcmVzaFRhYmxlKGV2ZW50KSk7XHJcblx0XHQkKFwiI3Jlc3QtY2FjaGUtYWRtaW4gI2NsZWFyLWNhY2hlXCIpLm9uKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB0aGlzLm9uQ2xlYXJDYWNoZShldmVudCkpO1xyXG5cdH1cclxuXHRcclxuXHRvblJlZnJlc2hUYWJsZShldmVudClcclxuXHR7XHJcblx0XHQkKFwiI3Jlc3QtY2FjaGUtYWRtaW4gI3JlY29yZHMgLmRhdGFUYWJsZVwiKS5EYXRhVGFibGUoKS5hamF4LnJlbG9hZCgpO1xyXG5cdH1cclxuXHRcclxuXHRvbkNsZWFyQ2FjaGUoZXZlbnQpXHJcblx0e1xyXG5cdFx0JC5hamF4KHRoaXMudXJsLCB7XHJcblx0XHRcdG1ldGhvZDogXCJERUxFVEVcIixcclxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UsIHN0YXR1cywgeGhyKSB7XHJcblx0XHRcdFx0c2VsZi5vbkFjdGlvbkNvbXBsZXRlKHJlc3BvbnNlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdG9uQWN0aW9uQ29tcGxldGUoZXZlbnQpXHJcblx0e1xyXG5cdFx0dGhpcy4kZWxlbWVudC5EYXRhVGFibGUoKS5hamF4LnJlbG9hZCgpO1xyXG5cdH1cclxufVxyXG4iLCJpbXBvcnQgVGFibGUgZnJvbSBcIi4vVGFibGVcIjtcclxuIFxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSdWxlc1RhYmxlIGV4dGVuZHMgVGFibGVcclxue1xyXG5cdGNvbnN0cnVjdG9yKGVsZW1lbnQpXHJcblx0e1xyXG5cdFx0c3VwZXIoZWxlbWVudCk7XHJcblx0XHRcclxuXHRcdHRoaXMuJGVsZW1lbnQub24oXCJjbGlja1wiLCBcIltkYXRhLWFjdGlvbj0nY2FuY2VsJ11cIiwgZXZlbnQgPT4gdGhpcy5vbkNhbmNlbChldmVudCkpO1xyXG5cdH1cclxuXHRcclxuXHRnZXRDb250cm9sRnJvbUZpZWxkKGZpZWxkKVxyXG5cdHtcclxuXHRcdHN3aXRjaChmaWVsZClcclxuXHRcdHtcclxuXHRcdFx0Y2FzZSBcInJlZ2V4XCI6XHJcblx0XHRcdFxyXG5cdFx0XHRcdHZhciAkaW5wdXQgPSBzdXBlci5nZXRDb250cm9sRnJvbUZpZWxkKGZpZWxkKTtcclxuXHRcdFx0XHQkaW5wdXQuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcclxuXHRcdFx0XHRyZXR1cm4gJGlucHV0O1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcclxuXHRcdFx0Y2FzZSBcImJlaGF2aW91clwiOlxyXG5cdFx0XHRcclxuXHRcdFx0XHR2YXIgJHNlbGVjdCA9ICQoXCI8c2VsZWN0IG5hbWU9J2JlaGF2aW91cic+XFxcclxuXHRcdFx0XHRcdDxvcHRpb24gdmFsdWU9J2V4Y2x1ZGUnPkV4Y2x1ZGU8L29wdGlvbj5cXFxyXG5cdFx0XHRcdFx0PG9wdGlvbiB2YWx1ZT0naW5jbHVkZSc+SW5jbHVkZTwvb3B0aW9uPlxcXHJcblx0XHRcdFx0PC9zZWxlY3Q+XCIpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHJldHVybiAkc2VsZWN0O1xyXG5cdFx0XHRcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHJcblx0XHRcdGNhc2UgXCJwcmlvcml0eVwiOlxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciAkaW5wdXQgPSBzdXBlci5nZXRDb250cm9sRnJvbUZpZWxkKGZpZWxkKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQkaW5wdXQuYXR0cihcInR5cGVcIiwgXCJudW1iZXJcIik7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0cmV0dXJuICRpbnB1dDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHN1cGVyLmdldENvbnRyb2xGcm9tRmllbGQoZmllbGQpO1xyXG5cdH1cclxuXHRcclxuXHRvbkNhbmNlbChldmVudClcclxuXHR7XHJcblx0XHR0aGlzLiRlbGVtZW50LkRhdGFUYWJsZSgpLmFqYXgucmVsb2FkKCk7XHJcblx0fVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFibGVcclxue1xyXG5cdGNvbnN0cnVjdG9yKGVsZW1lbnQpXHJcblx0e1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHJcblx0XHR0aGlzLiRlbGVtZW50ID0gJChlbGVtZW50KTtcclxuXHRcdFxyXG5cdFx0dGhpcy51cmwgPSB0aGlzLiRlbGVtZW50LmF0dHIoXCJkYXRhLXJvdXRlXCIpO1xyXG5cdFx0XHJcblx0XHR0aGlzLiRlbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCJbZGF0YS1hY3Rpb249J2VkaXQnXVwiLCBldmVudCA9PiB0aGlzLm9uRWRpdChldmVudCkpO1xyXG5cdFx0dGhpcy4kZWxlbWVudC5vbihcImNsaWNrXCIsIFwiW2RhdGEtYWN0aW9uPSd1cGRhdGUnXVwiLCBldmVudCA9PiB0aGlzLm9uVXBkYXRlKGV2ZW50KSk7XHJcblx0XHR0aGlzLiRlbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCJbZGF0YS1hY3Rpb249J2RlbGV0ZSddXCIsIGV2ZW50ID0+IHRoaXMub25EZWxldGUoZXZlbnQpKTtcclxuXHR9XHJcblx0XHJcblx0Z2V0SURGcm9tRXZlbnQoZXZlbnQpXHJcblx0e1xyXG5cdFx0bGV0ICR0ciA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdChcInRyXCIpO1xyXG5cdFx0bGV0IGlkID0gJHRyLmF0dHIoXCJkYXRhLWlkXCIpO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gaWQ7XHJcblx0fVxyXG5cdFxyXG5cdGdldENvbnRyb2xGcm9tRmllbGQoZmllbGQpXHJcblx0e1xyXG5cdFx0bGV0ICRpbnB1dCA9ICQoXCI8aW5wdXQvPlwiKTtcclxuXHRcdCRpbnB1dC5hdHRyKFwibmFtZVwiLCBmaWVsZCk7XHJcblx0XHRyZXR1cm4gJGlucHV0O1xyXG5cdH1cclxuXHRcclxuXHRnZXRSb3dEYXRhKGlkKVxyXG5cdHtcclxuXHRcdFxyXG5cdH1cclxuXHRcclxuXHRzZXRJdGVtRWRpdGFibGUoaWQpXHJcblx0e1xyXG5cdFx0bGV0IHNlbGYgPSB0aGlzO1xyXG5cdFx0bGV0ICR0ciA9IHRoaXMuJGVsZW1lbnQuZmluZChcInRyW2RhdGEtaWQ9J1wiICsgaWQgKyBcIiddXCIpO1xyXG5cdFx0XHJcblx0XHQkdHIuY2hpbGRyZW4oXCJ0ZFwiKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCB0ZCkge1xyXG5cdFx0XHRcclxuXHRcdFx0bGV0IGZpZWxkID0gJCh0ZCkuYXR0cihcImRhdGEtZmllbGRcIik7XHJcblx0XHRcdFxyXG5cdFx0XHRzd2l0Y2goZmllbGQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjYXNlIFwiaWRcIjpcclxuXHRcdFx0XHRjYXNlIFwiYWN0aW9uc1wiOlxyXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bGV0ICRpbnB1dCA9IHNlbGYuZ2V0Q29udHJvbEZyb21GaWVsZChmaWVsZCk7XHJcblx0XHRcdFxyXG5cdFx0XHRzd2l0Y2goJGlucHV0LmF0dHIoXCJ0eXBlXCIpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Y2FzZSBcImNoZWNrYm94XCI6XHJcblx0XHRcdFx0XHQkaW5wdXQucHJvcChcImNoZWNrZWRcIiwgJCh0ZCkudGV4dCgpID09IDEpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdCRpbnB1dC52YWwoJCh0ZCkudGV4dCgpKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQkKHRkKS5lbXB0eSgpO1xyXG5cdFx0XHQkKHRkKS5hcHBlbmQoJGlucHV0KTtcclxuXHRcdFx0XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0JHRyLmFkZENsYXNzKFwicmVzdC1jYWNoZS1lZGl0aW5nXCIpO1xyXG5cdH1cclxuXHRcclxuXHRvbkVkaXQoZXZlbnQpXHJcblx0e1xyXG5cdFx0bGV0IGlkID0gdGhpcy5nZXRJREZyb21FdmVudChldmVudCk7XHJcblx0XHR0aGlzLnNldEl0ZW1FZGl0YWJsZShpZCk7XHJcblx0fVxyXG5cdFxyXG5cdG9uVXBkYXRlKGV2ZW50KVxyXG5cdHtcclxuXHRcdGxldCBzZWxmXHQ9IHRoaXM7XHJcblx0XHRsZXQgaWRcdFx0PSB0aGlzLmdldElERnJvbUV2ZW50KGV2ZW50KTtcclxuXHRcdGxldCBkYXRhXHQ9IHt9O1xyXG5cdFx0bGV0ICR0clx0XHQ9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdChcInRyXCIpO1xyXG5cdFx0XHJcblx0XHQkdHIuZmluZChcIjppbnB1dFwiKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbCkge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIG5hbWUgPSAkKGVsKS5hdHRyKFwibmFtZVwiKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmKCFuYW1lKVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHJcblx0XHRcdHN3aXRjaCgkKGVsKS5hdHRyKFwidHlwZVwiKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNhc2UgXCJjaGVja2JveFwiOlxyXG5cdFx0XHRcdGNhc2UgXCJyYWRpb1wiOlxyXG5cdFx0XHRcdFx0ZGF0YVtuYW1lXSA9ICQoZWwpLnByb3AoXCJjaGVja2VkXCIpID8gMSA6IDA7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0ZGF0YVtuYW1lXSA9ICQoZWwpLnZhbCgpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0JC5hamF4KHRoaXMudXJsICsgXCIvXCIgKyBpZCwge1xyXG5cdFx0XHRtZXRob2Q6IFwiUFVUXCIsXHJcblx0XHRcdGRhdGE6IGRhdGEsXHJcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlLCBzdGF0dXMsIHhocikge1xyXG5cdFx0XHRcdHNlbGYub25BY3Rpb25Db21wbGV0ZShyZXNwb25zZSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyb3IpIHtcclxuXHRcdFx0XHRpZih4aHIuc3RhdHVzID09IDQyMilcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIganNvbiA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcblx0XHRcdFx0XHRzZWxmLm9uRXJyb3IoeGhyLnN0YXR1cywganNvbik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0b25EZWxldGUoZXZlbnQpXHJcblx0e1xyXG5cdFx0bGV0IHNlbGZcdD0gdGhpcztcclxuXHRcdGxldCBpZFx0XHQ9IHRoaXMuZ2V0SURGcm9tRXZlbnQoZXZlbnQpO1xyXG5cdFx0XHJcblx0XHQkLmFqYXgodGhpcy51cmwgKyBcIi9cIiArIGlkLCB7XHJcblx0XHRcdG1ldGhvZDogXCJERUxFVEVcIixcclxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UsIHN0YXR1cywgeGhyKSB7XHJcblx0XHRcdFx0c2VsZi5vbkFjdGlvbkNvbXBsZXRlKHJlc3BvbnNlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdG9uQWN0aW9uQ29tcGxldGUoZXZlbnQpXHJcblx0e1xyXG5cdFx0dGhpcy4kZWxlbWVudC5EYXRhVGFibGUoKS5hamF4LnJlbG9hZCgpO1xyXG5cdH1cclxuXHRcclxuXHRvbkVycm9yKGNvZGUsIGpzb24pXHJcblx0e1xyXG5cdFx0Zm9yKHZhciBrZXkgaW4ganNvbi5lcnJvcnMpXHJcblx0XHR7XHJcblx0XHRcdGFsZXJ0KGpzb24uZXJyb3JzW2tleV0pO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCJyZXF1aXJlKCcuL0FkbWluJyk7Il19"}